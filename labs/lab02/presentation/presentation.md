---
## Front matter
lang: ru-RU
title: Лабораторная работа №2
subtitle: Настройка DNS-сервера
author:
  - Беличева Дарья Михайловна
institute:
  - Российский университет дружбы народов, Москва, Россия

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---

## Цель работы

Приобрести практические навыки по установке и конфигурированию DNS-сервера, усвоить принципы работы системы доменных имён.

## Задание

1. Установите на виртуальной машине server DNS-сервер bind и bind-utils.
2. Сконфигурируйте на виртуальной машине server кэширующий DNS-сервер.
3. Сконфигурируйте на виртуальной машине server первичный DNS-сервер.
4. При помощи утилит dig и host проанализируйте работу DNS-сервера.
5. Напишите скрипт для Vagrant, фиксирующий действия по установке и конфигурированию DNS-сервера во внутреннем окружении виртуальной машины server. Соответствующим образом внесите изменения в Vagrantfile

## Выполнение лабораторной работы

![Установка bind и bind-utils в режиме суперпользователя](image/2.png){#fig:002 width=70%}

## Выполнение лабораторной работы

C помощью утилиты dig сделаем запрос к DNS-адресу www.yandex.ru:

![Команда dig](image/3.png){#fig:003 width=70%}

## Выполнение лабораторной работы

![Изменение адреса dns-сервера](image/8.png){#fig:008 width=60%}

## Выполнение лабораторной работы

![Изменение адреса dns-сервера](image/9.png){#fig:009 width=60%}

## Выполнение лабораторной работы

Настроим направление DNS-запросов от всех узлов внутренней сети, включая запросы от узла server, через узел server. Для этого внесем изменения в файл /etc/named.conf:

![Изменение скрипта](image/10.png){#fig:010 width=60%}

## Выполнение лабораторной работы

Внесем изменения в настройки межсетевого экрана узла server, разрешив работу с DNS и убедимся, что DNS-запросы идут через узел server, который прослушивает порт 53:

![Внесение изменений](image/11.png){#fig:011 width=60%}

## Выполнение лабораторной работы

В случае возникновения в сети ситуации, когда DNS-запросы от сервера
фильтруются сетевым оборудованием, следует добавить перенаправление
DNS-запросов на конкретный вышестоящий DNS-сервер. Для этого в конфигура-
ционный файл named.conf в секцию options следует добавить:

## Выполнение лабораторной работы

![Изменение скрипта](image/12.png){#fig:012 width=70%}

## Выполнение лабораторной работы

**Конфигурирование первичного DNS-сервера**

![Окно терминала](image/14.png){#fig:014 width=70%}

## Выполнение лабораторной работы

![Изменение скрипта](image/15.png){#fig:015 width=60%}

## Выполнение лабораторной работы

Внесём изменения в файл dmbelicheva.net:

![Изменение скрипта](image/16.png){#fig:016 width=50%}

## Выполнение лабораторной работы

![Изменение скрипта](image/17.png){#fig:017 width=70%}

## Выполнение лабораторной работы

Изменим файл /var/named/master/fz/user.net, указав необходимые DNS-записи для прямой зоны:

![Изменение скрипта](image/18.png){#fig:018 width=60%}

## Выполнение лабораторной работы

Скопируем шаблон обратной DNS-зоны named.loopback из каталога /var/named
в каталог /var/named/master/rz и переименуем его в 192.168.1, а также изменим файл:

![Изменение скрипта](image/19.png){#fig:019 width=50%}

## Выполнение лабораторной работы

![Восстановление меток безопасности и проверка состояния переключателей в SELinux](image/20.png){#fig:020 width=70%}

## Выполнение лабораторной работы

В дополнительном терминале запустим в режиме реального времени расширенный лог системных сообщений, чтобы проверить корректность работы системы:

![Запуск расширенного лога системных сообщений](image/21.png){#fig:021 width=50%}

## Выполнение лабораторной работы

В случае ошибок перезапустим DNS-сервер:

![Перезапуск сервера](image/22.png){#fig:022 width=70%}

## Выполнение лабораторной работы

**Анализ работы DNS-сервера**

![Утилита dig](image/23.png){#fig:023 width=60%}

## Выполнение лабораторной работы

При помощи утилиты host проанализируем корректность работы DNS-сервера, можно увидеть, что все внесённые нами изменения в работу сервера учтены:

![Утилита host](image/24.png){#fig:024 width=60%}

## Выполнение лабораторной работы

**Внесение изменений в настройки внутреннего окружения виртуальной машины**

![Создание каталога dns и перенос в него файлов, создание dns.sh](image/26.png){#fig:026 width=70%}

## Выполнение лабораторной работы

![Изменение скрипта](image/25.png){#fig:025 width=60%}

## Выполнение лабораторной работы

![Изменение Vagrantfile](image/27.png){#fig:027 width=70%}


## Выводы

В процессе выполнения данной лабораторной работы я приобрела практические навыки по установке и конфигурированию DNS-сервера, усвоила принципы работы системы доменных имён.
